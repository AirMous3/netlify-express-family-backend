{"version":3,"sources":["panels/config.js","img/Real_Map_of_the_World.jpg","img/mom-and-dad.png","img/workers.png","img/actor.png","panels/Subscribe.js","img/family-three.png","panels/PhotoGroup.js","img/book2.png","img/camera_400.png","panels/Result.js","App.js","index.js"],"names":["panelsConfig","id","panelId","title","img","text","dataTo","radio","textConfig","Subscribe","go","subscribe","a","bridge","send","group_id","then","catch","result","style","backgroundColor","className","level","marginBottom","weight","size","stretched","onClick","src","actor","appearance","PhotoGroup","fetchData","app_id","scope","data","access_token","authToken","method","params","albums_ids","v","album","response","items","length","find","item","includes","privacy_view","key","value","e","error","family","alt","marginTop","display","justifyContent","APP_ID","fetchFileStream","fileAddress","filename","imgType","fetchStream","readAllChunks","body","chunks","File","type","readableStream","reader","getReader","pump","read","done","push","Result","user","imageData","fetchedUser","useState","isHandlingPost","setIsHandlingPost","profileImage","photo_max_orig","defaultPhoto","Math","floor","random","last_name","handlePost","serverToPhoto","uploadUrl","upload_url","replace","request","FormData","append","fetch","json","server","photo","hash","res","photo_id","message","attachments","useEffect","canvas","document","getElementById","ctx","getContext","crossOrigin","image","Image","book","image2","Promise","all","resolve","reject","onload","onerror","width","height","drawImage","font","fillText","context","x","y","maxWidth","lineHeight","textAlign","i","test","metrics","words","split","line","measureText","substring","splice","substr","wrapText","toDataURL","disabled","App","setScheme","activePanel","setActivePanel","setUser","popout","setPopout","detail","scheme","currentTarget","dataset","to","maxHeight","padding","animate","map","separator","ReactDOM","render"],"mappings":"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","file":"static/js/main.83215d8e.chunk.js","sourcesContent":["import back from '../img/Real_Map_of_the_World.jpg';\r\nimport family from '../img/mom-and-dad.png';\r\nimport workers from '../img/workers.png';\r\n\r\nexport const panelsConfig = [\r\n    {\r\n        id: 1,\r\n        panelId: 'question.1',\r\n        title: 'Вопрос 1',\r\n        img: back,\r\n        text: 'Начнем изучать истоки вашей фамилии. Мы зададим вам несколько вопросов, чтобы точнее собрать информацию. Кто нибудь из ваших родных проживает за границей?',\r\n        dataTo: 'question.2',\r\n        radio: [\r\n            {title: 'Да', id: 1},\r\n            {title: 'Нет', id: 2},\r\n            {title: 'Затрудняюсь ответить', id: 3}\r\n        ]\r\n    },\r\n    {\r\n        id: 2,\r\n        panelId: 'question.2',\r\n        title: 'Вопрос 2',\r\n        img: family,\r\n        text: 'Замечательно. Фамилия  отца или по линии матери?',\r\n        dataTo: 'question.3',\r\n        radio: [\r\n            {title: 'Фамилия отца', id: 1},\r\n            {title: 'Фамилия матери', id: 2},\r\n        ]\r\n    },\r\n    {\r\n        id: 3,\r\n        panelId: 'question.3',\r\n        title: 'Вопрос 3',\r\n        img: workers,\r\n        text: 'А теперь вспомните: какой род деятельности был у ваших предков?',\r\n        dataTo: 'subscribe',\r\n        radio: [\r\n            {title: 'Учителя', id: 1},\r\n            {title: 'Машинисты', id: 2},\r\n            {title: 'Актёры,Музыканты и тд (Творческие люди)', id: 3},\r\n            {title: 'Госслужащие', id: 4},\r\n            {title: 'Другое', id: 5},\r\n            {title: 'Затрудняюсь ответить', id: 6},\r\n        ]\r\n    },\r\n];\r\n\r\nexport const textConfig = ['Фамилия корнями идет из древней Грузии. Тогда ее зародил один княжеский потомок. Живя в Кахетии он очень хорошо возродил землю. Про людей с такой фамилией принято считать, что они очень хозяйственны, умны и трудолюбивы', 'Этой фамилией удостаивали избранных людей, только самых упорных. Всегда правильно умели слушать, а потому добиваются высот почти не прикладывая сил, конечно, тут ещё и дело в умении работать, ведь делают они это старательно, не пропуская никаких мелочей', 'Русский княжеский род, который происходит от ветви Рюриковичей. В роду было много генералов и можно гордиться фамилией, ведь они были замечательными начальниками, за которыми шел народ. Также они умели слушать и всегда готовы были подставить плечо нуждающимся', 'Фамильный род имел много успешных докторов, которые всегда могли помочь. Их семьи были всегда в почете. Это самоотверженные и усидчивые люди, искали новые способы лечения. И до сих пор носителей фамилии отличает новаторство и энтузиазм', 'Эта фамилия происходит от духовного сословия. Она всегда придавала важности, ведь ею награждали самых отличившихся и многого добившихся служителей. Теперь же носители очень рационально используют свои ресурсы и стараются вкладывать в свое дело душу', 'История этой фамилии на Руси идет от граждан Великого Новгорода, именно они первыми получили эту фамилию. Это очень смелые и добрые люди. Когдато в их роду были иконописцы и поэты, а потому сейчас они не потеряли своей творческой жилки', 'Эта фамилия имеет польское происхождение. В те времена многое заимствовали с запада. Такое окончание часто именовали в шляхтах. У нас же ими одаровывали зажиточные семьи. Носители фамилии всегда настойчивые и усердные, а потому они часто доходят до высоких должностей.', 'Эта фамилия происходит с 15-го века, от рода художников. Они славились не только картинами, но и могли иконы написать. Носители фамилии и сейчас очень творческие натуры, усидчивые, любят экспериментировать.', 'Эта фамилия была присуща боярам на Руси. Они были очень трудолюбивы, стремились с процветанию своего поместья. Потомкам присуща не только трудолюбие, они стараются найти творческий подход и нестандартное решение. А так же очень ценят свою семью', 'Громкие, творческие, успешные - это про носителей рода, который пошел ещё с княжеских времен. Основателем были учителя, с гордостью носившие это звание. Ведь в то время это были самые интеллигентные слои общества, они всегда знают чего хотят.', 'Фамилия принадлежит старинному дворянскому роду. Одному из представителей был присвоен этот титул за усердие и верность. Этот род всегда славился праведными, целомудренными корнями, духовно чистых людей.', 'Эта фамилия истоками уходит в 14-й век, в русскую боярскую семью. Носители были почетными людьми, грамотными и рассудительными. Только вот не удержались они и все разъехались по разным уголкам, так, что уже даже в Европейских странах можно найти свои корни', 'Интеллект и богатое воображение всегда характеризовало эту династию. Зародилась она от семьи дворян. Позже в роду было много художников и иконописцев. Сейчас же предки часто выбирают профессии, где можно реализовывать свои креативные идеи.', 'Потомки короля с гордостью носили эту фамилию. Род отличается упорством, они всегда идут напролом, не обращая внимание на преграды, возникающие на пути. А потому всегда получают желаемого и многого добиваются в жизни.'];\r\n","export default __webpack_public_path__ + \"static/media/Real_Map_of_the_World.0825f9c8.jpg\";","export default __webpack_public_path__ + \"static/media/mom-and-dad.a7f06aa7.png\";","export default __webpack_public_path__ + \"static/media/workers.bbbb6453.png\";","export default __webpack_public_path__ + \"static/media/actor.7ffca70f.png\";","import React from 'react';\n\nimport {Button, Group, Panel, Text, Title} from '@vkontakte/vkui';\nimport actor from '../img/actor.png';\nimport './subscribe.css';\nimport bridge from '@vkontakte/vk-bridge';\n\nexport const Subscribe = ({id, go}) => {\n\n        const subscribe = async () => {\n            try {\n                const data = await bridge.send('VKWebAppJoinGroup', {\n                        group_id: 192188796\n                    }).then(() => {\n                        bridge.send('VKWebAppJoinGroup', {\n                            group_id: 161228385\n                        });\n                    }).catch(() => go('photoGroup'))\n                ;\n\n                if (data.result) {\n                    go('photoGroup');\n                }\n\n            } catch (e) {\n                go('photoGroup');\n            }\n        };\n\n        return <Panel id={id} style={{backgroundColor: '#fff'}}>\n            <div className={'subscribe-container'}>\n\n                <Title\n                    level={'1'}\n                    style={{marginBottom: 16}}\n                >\n                    Уведомление\n                </Title>\n\n\n                <Text\n                    weight=\"semibold\"\n                    style={{marginBottom: '20px'}}\n                >\n                    Отлично! Мы обнаружили несколько сходств, а пока мы ищем вашу\n                    родословную,\n                    предлагаем вам\n                    подписаться на\n                    нашу группу, чтобы не пропустить новый тест. \"На какую знаменитость я\n                    похож\"\n                </Text>\n\n                <Button size={'l'} stretched={true}\n                        onClick={subscribe}>Продолжить</Button>\n\n                <img className=\"subscribe-img\" src={actor}/>\n\n                <Button size={'l'} appearance={'neutral'}\n                        onClick={() => go('photoGroup')}>Отказаться</Button>\n            </div>\n\n\n        </Panel>;\n    }\n;\n","export default __webpack_public_path__ + \"static/media/family-three.c55ad876.png\";","import {Button, Panel, Text} from '@vkontakte/vkui';\r\nimport family from '../img/family-three.png';\r\nimport React from 'react';\r\nimport './photoGroup.css';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\n\r\nexport const PhotoGroup = ({id, go}) => {\r\n\r\n    const fetchData = async () => {\r\n        let authToken;\r\n        bridge.send('VKWebAppGetAuthToken', {\r\n            app_id: 51489325,\r\n            scope: 'photos'\r\n        }).then((data) => {\r\n            if (data.access_token) {\r\n                authToken = data.access_token;\r\n\r\n                bridge.send('VKWebAppCallAPIMethod', {\r\n                    method: 'photos.getAlbums',\r\n                    params: {\r\n                        albums_ids: 51489325,\r\n                        access_token: authToken,\r\n                        v: '5.131',\r\n                    }\r\n                })\r\n                    .then((data) => {\r\n                        let album;\r\n                        if (data.response.items.length > 0) {\r\n                            album = data.response.items.find((item) => item.title.includes('Истоки моей фамилии'));\r\n                        }\r\n                        if (album) {\r\n                            go('result');\r\n                        } else {\r\n\r\n                            bridge.send('VKWebAppCallAPIMethod', {\r\n                                method: 'photos.createAlbum',\r\n                                params: {\r\n                                    title: 'Истоки моей фамилии',\r\n                                    v: '5.131',\r\n                                    access_token: authToken,\r\n                                    privacy_view: 'all',\r\n                                }\r\n                            }).then((data) => {\r\n                                if (data.response) {\r\n                                    bridge.send('VKWebAppStorageSet', {\r\n                                        key: 'appId',\r\n                                        value: `${data.response.id}`\r\n                                    }).then(() => {\r\n                                        go('result');\r\n                                    }).catch(() => {\r\n                                        go('result');\r\n                                    });\r\n\r\n                                }\r\n                            }).catch((e) => {\r\n                                go('result');\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        go('result');\r\n                    });\r\n\r\n            }\r\n        })\r\n            .catch((error) => {\r\n                go('result');\r\n            });\r\n\r\n    };\r\n\r\n    return <Panel id={id} style={{backgroundColor: '#fff'}}>\r\n        <div className={'photoGroup-container'}>\r\n            <img className={'photoGroup-image'} src={family} alt=\"familyImage\"/>\r\n\r\n            <Text\r\n                weight=\"semibold\"\r\n                style={{marginTop: '20px', marginBottom: '20px'}}\r\n            >\r\n                Подсчёты почти готовы,мы разместим его в фотоальбоме на страничке, с\r\n                вашего разрешения. Для этого всего лишь нужно разрешить доступ к фото\r\n            </Text>\r\n\r\n            <Button style={{marginBottom: '20px'}} size={'l'}\r\n                    stretched={true} onClick={fetchData}>Хорошо</Button>\r\n\r\n\r\n        </div>\r\n        <div style={{display: 'flex', justifyContent: 'center'}}>\r\n            <Button\r\n                size={'l'}\r\n                appearance={'neutral'}\r\n                onClick={() => go('result')}\r\n            >\r\n                Отказаться</Button>\r\n        </div>\r\n    </Panel>;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/book2.3669c464.png\";","export default __webpack_public_path__ + \"static/media/camera_400.3aeeae7e.png\";","import {Button, Panel, Text, Spinner} from '@vkontakte/vkui';\r\nimport React, {useState, useEffect} from 'react';\r\nimport book from '../img/book2.png';\r\nimport defaultPhoto from '../img/camera_400.png';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport fetchStream from 'fetch-readablestream';\r\nimport {textConfig} from './config';\r\n\r\nconst CORS_PROXY = 'https://cors-anywhere.herokuapp.com/';\r\nconst APP_ID = 51489325;\r\n\r\nasync function fetchFileStream(fileAddress, filename, imgType) {\r\n    return fetchStream(fileAddress)\r\n        .then(response => readAllChunks(response.body))\r\n        .then(chunks => new File(chunks, filename, {type: imgType}));\r\n}\r\n\r\nconst readAllChunks = (readableStream) => {\r\n    const reader = readableStream.getReader();\r\n    const chunks = [];\r\n\r\n    const pump = () => {\r\n        return reader.read().then(({value, done}) => {\r\n            if (done)\r\n                return chunks;\r\n            chunks.push(value);\r\n            return pump();\r\n        });\r\n    };\r\n\r\n    return pump();\r\n};\r\n\r\nfunction wrapText(context, text, x, y, maxWidth, lineHeight) {\r\n    context.font = '21px serif';\r\n    context.textAlign = 'center';\r\n\r\n\r\n    var words = text.split(' '),\r\n        line = '',\r\n        lineCount = 0,\r\n        i,\r\n        test,\r\n        metrics;\r\n\r\n    for (i = 0; i < words.length; i++) {\r\n        test = words[i];\r\n        metrics = context.measureText(test);\r\n        while (metrics.width > maxWidth) {\r\n            // Determine how much of the word will fit\r\n            test = test.substring(0, test.length - 1);\r\n            metrics = context.measureText(test);\r\n        }\r\n        if (words[i] != test) {\r\n            words.splice(i + 1, 0, words[i].substr(test.length));\r\n            words[i] = test;\r\n        }\r\n\r\n        test = line + words[i] + ' ';\r\n        metrics = context.measureText(test);\r\n\r\n        if (metrics.width > maxWidth && i > 0) {\r\n            context.fillText(line, x, y);\r\n            line = words[i] + ' ';\r\n            y += lineHeight;\r\n            lineCount++;\r\n        } else {\r\n            line = test;\r\n        }\r\n    }\r\n\r\n    context.fillText(line, x, y);\r\n}\r\n\r\n\r\nconst getProfilePhoto = (user) => {\r\n    if (user.photo_max_orig.includes('camera_400.png')) {\r\n        return defaultPhoto;\r\n    }\r\n\r\n    return user.photo_max_orig;\r\n};\r\n\r\nexport const Result = ({id, fetchedUser}) => {\r\n    const [isHandlingPost, setIsHandlingPost] = useState(false);\r\n\r\n    const profileImage = getProfilePhoto(fetchedUser);\r\n    const text = textConfig[Math.floor(Math.random() * textConfig.length)];\r\n    const {last_name} = fetchedUser;\r\n    let imageData;\r\n\r\n    async function handlePost() {\r\n        let authToken;\r\n        const data = await bridge.send('VKWebAppGetAuthToken', {\r\n            app_id: 51489325,\r\n            scope: 'photos'\r\n        });\r\n        authToken = data.access_token;\r\n\r\n        const serverToPhoto = await bridge.send('VKWebAppCallAPIMethod', {\r\n            method: 'photos.getWallUploadServer',\r\n            params: {\r\n                access_token: authToken,\r\n                v: '5.131'\r\n            }\r\n        });\r\n        const uploadUrl = serverToPhoto.response.upload_url.replace('https://pu.vk.com', '/proxy');\r\n\r\n        const request = new FormData();\r\n        request.append('photo', await fetchFileStream(imageData, 'book.png', 'image/png'));\r\n        const {\r\n            server,\r\n            photo,\r\n            hash\r\n        } = await fetch(uploadUrl, {\r\n            method: 'POST',\r\n            body: request,\r\n        }).then((response) => response.json());\r\n\r\n        const res = await bridge.send('VKWebAppCallAPIMethod', {\r\n            method: 'photos.saveWallPhoto',\r\n            params: {\r\n                access_token: authToken, server, photo, hash,\r\n                v: '5.131'\r\n            }\r\n        });\r\n        const {id: photo_id} = res.response[0];\r\n        await bridge.send('VKWebAppShowWallPostBox', {\r\n            message: `Я сразу не поверил, пока сам не прошёл тест на происхождение моей фамилии &#128073; https://vk.com/app51489325`,\r\n            attachments: `photo${fetchedUser.id}_${photo_id},https://vk.com/app${APP_ID}`\r\n        });\r\n\r\n    }\r\n\r\n    async function onHandlePostClick() {\r\n        try {\r\n            setIsHandlingPost(true);\r\n            await handlePost();\r\n        } finally {\r\n            setIsHandlingPost(false);\r\n        }\r\n    }\r\n\r\n    async function handleStories() {\r\n        let authToken;\r\n        const data = await bridge.send('VKWebAppGetAuthToken', {\r\n            app_id: 51489325,\r\n            scope: 'stories'\r\n        });\r\n        authToken = data.access_token;\r\n\r\n        const address = await bridge.send('VKWebAppCallAPIMethod', {\r\n            method: 'stories.getPhotoUploadServer',\r\n            params: {\r\n                access_token: authToken,\r\n                v: '5.131',\r\n                add_to_news: 1,\r\n                link_url: 'https://vk.com/app51489325_600559406'\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const canvas = document.getElementById('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.crossOrigin = 'no-cors';\r\n\r\n        const image = new Image(600, 450);\r\n        image.crossOrigin = 'no-cors';\r\n\r\n        image.src = book;\r\n\r\n        const image2 = new Image(200, 200);\r\n        image2.src = profileImage;\r\n        image2.crossOrigin = 'no-cors';\r\n\r\n        Promise.all([\r\n            new Promise((resolve, reject) => {\r\n                image.onload = resolve;\r\n                image.onerror = reject;\r\n            }),\r\n            new Promise((resolve, reject) => {\r\n                image2.onload = resolve;\r\n                image2.onerror = reject;\r\n            }),\r\n        ]).then(drawImageActualSize);\r\n\r\n\r\n        function drawImageActualSize() {\r\n            canvas.width = 1000;\r\n            canvas.height = 650;\r\n\r\n            ctx.drawImage(image, 250, 0, 450, 650);\r\n\r\n\r\n            ctx.drawImage(image2, 340, 80, 270, 270);\r\n\r\n            ctx.font = '35px serif';\r\n            ctx.fillText(last_name, 420, 405);\r\n\r\n            // ctx.font = '38px serif';\r\n            // ctx.fillText(text, 1450, 400);\r\n\r\n            wrapText(ctx, text, 480, 445, 350, 22);\r\n            imageData = canvas.toDataURL('image/png');\r\n        }\r\n\r\n\r\n    }, []);\r\n\r\n    return <Panel id={id} style={{backgroundColor: '#fff'}}>\r\n        <canvas id=\"canvas\" className={'result-image'}></canvas>\r\n\r\n        <Button size={'l'} style={{marginTop: '20px', marginBottom: '20px'}}\r\n                onClick={onHandlePostClick} disabled={isHandlingPost}>\r\n            {isHandlingPost ? <Spinner size=\"small\"/> : 'Поделиться на стене'}\r\n        </Button>\r\n        {/*<Button size={'l'} onClick={() => handleStories()}>Поделиться в истории</Button>*/}\r\n\r\n        <Text style={{textAlign: 'center'}} weight={1}>Спасибо что\r\n            прошли наш тест!</Text>\r\n    </Panel>;\r\n};\r\n","import React, {useEffect, useState} from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {\n    AdaptivityProvider,\n    AppRoot,\n    ConfigProvider, Group, Panel, Radio, RadioGroup,\n    ScreenSpinner,\n    SplitCol,\n    SplitLayout, Text, Title,\n    View\n} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport {panelsConfig} from './panels/config';\nimport {Subscribe} from './panels/Subscribe';\nimport './app.css';\nimport {PhotoGroup} from './panels/PhotoGroup';\nimport {Result} from './panels/Result';\n\nconst App = () => {\n    const [scheme, setScheme] = useState('bright_light');\n    const [activePanel, setActivePanel] = useState('question.1');\n    const [fetchedUser, setUser] = useState(null);\n    const [popout, setPopout] = useState(<ScreenSpinner size=\"large\"/>);\n\n    useEffect(() => {\n        bridge.subscribe(({detail: {type, data}}) => {\n            if (type === 'VKWebAppUpdateConfig') {\n                setScheme(data.scheme);\n            }\n        });\n\n        async function fetchData() {\n            const user = await bridge.send('VKWebAppGetUserInfo');\n            setUser(user);\n            setPopout(null);\n        }\n\n\n        fetchData();\n\n    }, []);\n\n    const go = e => {\n        setActivePanel(e.currentTarget.dataset.to);\n    };\n\n    return (\n        <ConfigProvider>\n            <AdaptivityProvider>\n                <AppRoot style={{backgroundColor: '#fff'}}>\n                    <SplitLayout style={{maxHeight: '520px'}}\n                                 popout={popout}>\n                        <SplitCol style={{padding: '10px'}} animate={true}>\n                            <View activePanel={activePanel}>\n\n                                {panelsConfig.map(({\n                                                       id,\n                                                       title,\n                                                       text,\n                                                       img,\n                                                       panelId,\n                                                       dataTo,\n                                                       radio\n                                                   }) =>\n                                    <Panel\n                                        id={panelId}\n                                        key={id}\n                                        style={{backgroundColor: '#fff'}}>\n\n                                        <Group separator={'hide'}\n                                               style={{backgroundColor: '#fff'}}>\n\n                                            <div className={'container'}>\n                                                <Title\n                                                    level={'1'}\n                                                    style={{\n                                                        marginBottom: 16,\n                                                        textAlign: 'center'\n                                                    }}\n                                                >\n                                                    {title}\n                                                </Title>\n\n                                                <img className=\"img\" src={img}/>\n\n                                                <Text\n                                                    weight=\"semibold\"\n                                                    style={{\n                                                        marginTop: '20px',\n                                                        marginBottom: '20px',\n                                                        maxWidth: '660px'\n                                                    }}\n                                                >\n                                                    {text}\n                                                </Text>\n                                            </div>\n\n                                            <RadioGroup>\n                                                {radio.map(({title, id}) =>\n                                                    <Radio\n                                                        onClick={go}\n                                                        data-to={dataTo}\n                                                        key={id}\n                                                    >\n                                                        {title}\n                                                    </Radio>\n                                                )}\n                                            </RadioGroup>\n                                        </Group>\n                                    </Panel>)}\n\n                                <Subscribe id={'subscribe'} go={setActivePanel}/>\n\n                                <PhotoGroup id={'photoGroup'} go={setActivePanel}/>\n\n                                <Result id={'result'} fetchedUser={fetchedUser}/>\n                            </View>\n                        </SplitCol>\n                    </SplitLayout>\n                </AppRoot>\n            </AdaptivityProvider>\n        </ConfigProvider>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport bridge from '@vkontakte/vk-bridge';\nimport App from './App';\nimport {BrowserRouter} from 'react-router-dom';\n\n// Init VK  Mini App\nbridge.send('VKWebAppInit');\n\nReactDOM.render(<BrowserRouter><App/></BrowserRouter>, document.getElementById('root'));\nif (process.env.NODE_ENV === 'development') {\n    import('./eruda').then(({default: eruda}) => {\n    }); //runtime download\n}\n"],"sourceRoot":""}